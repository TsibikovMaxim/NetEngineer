<!DOCTYPE html>
<html>
<head>
	<!-- Charset -->
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Маршрутизация в сетях ZigBee</title>
	<!-- Include meta tag to ensure proper rendering and touch zooming-->
	<meta name="view-port" content="width=device-width, initial-scale=1">
	<!-- Include jQuery Mobile stylesheets -->
	<link rel="stylesheet" href="../../../../css/jquery.mobile-1.4.5.min.css" />
	<link rel="stylesheet" href="../../../../css/themes/my-theme.css" />
	<link rel="stylesheet" href="../../../../css/themes/jquery.mobile.icons.min.css" />
	<link rel="stylesheet" href="../../../../css/my-style.css" />
	<!-- Include the jQuery Mobile library -->
	<script type="text/javascript" src="../../../../js/jquery-1.11.3.min.js"></script>
	<!-- Include the jQuery Mobile library -->
	<script type="text/javascript" src="../../../../js/jquery.mobile-1.4.5.min.js"></script>
	<!-- AdMob-->
	<script type="text/javascript" src="../../../../js/admob.js"></script>
	<!-- cordova js -->
	<script src="../../../../cordova.js"></script>
</head>
<body>

<div data-role="page" id="position" data-theme="a">

	<div data-role="header" data-position="fixed">
		<a data-role="button" data-rel="back" data-ajax="false" class="ui-nodisc-icon transparentButton" data-icon="carat-l" data-iconpos="notext" data-theme="a">Кнопка назад</a>
		<h1>Описание</h1>
		<a href="../../../../index.html" data-ajax="false" class="ui-nodisc-icon transparentButton" data-role="button" data-icon="home" data-iconpos="notext" data-shadow="false" data-transition="none" data-theme="a">На главную</a>
	</div>

	<div data-role="main" class="ui-content">

		<h3>Маршрутизация в сетях ZigBee</h3>

		<p>Основной алгоритм маршрутизации в сетях ZigBee – «Ad hoc On Demand Distance Vector» (AODV) основан на понятии «вектор расстояния» маршрута, когда каждый маршрутизатор, участвующий в трансляции запроса маршрута от конкретного источника к конкретному пункту назначения создает свою запись в маршрутной таблице. Эта запись как минимум содержит «логическое расстояние» от источника запроса и адрес предыдущего маршрутизатора.</p>

		<p>Алгоритм работает следующим образом:</p>

		<ul>
			<li>когда устройству «источник» (И) необходимо отправить пакет на устройство «адресат» (А), источник инициирует процесс обнаружения маршрута путем рассылки широковещательного пакета «запрос маршрута», запрашивая маршрут к устройству А (см. рис.5);</li>
			<li>каждое устройство, которое получило этот запрос маршрута, вносит свою запись в таблицу маршрутизации и может транслировать этот запрос, включив в него таблицу со своей записью (см. рис. 6);</li>
			<li>следующие устройства, получившие ретранслированный запрос, транслируют его дальше, и с каждым шагом «логическое расстояние», пройденное запросом, увеличивается на величину, зависящую от качества связи на очередном участке;</li>
			<li>процесс продолжается пока запрос не достигает устройства А, причем обычно устройства А достигает несколько ретранслированных запросов (от разных маршрутизаторов) и «логические расстояния» (ЛР) маршрутов этих пакетов различны;</li>
			<li>устройство А отправляет ответ по маршруту, имеющему минимальное «логическое расстояние»;</li>
			<li>ответ будет возвращаться в соответствие с таблицей маршрута по пути, пройденному первоначальным запросом, пока не прибудет на устройство И (рис. 7).</li>
		</ul>

		<p>Эта серия передаваемых в обратном направлении ответов формирует прямой маршрут для будущей передачи пакетов от И до А (рис. 8). Механизм «логического расстояния» позволяет источнику и узлам, расположенным на пути запроса, выбрать минимальное «логическое расстояние» маршрута от источника до места назначения.</p>

		<center><img src="../../../../images/line/wireless/zigbee/item-7.1.jpg"></center>

		<p>Рисунок 5. Поиск маршрута. Шаг 1</p>

		<center><img src="../../../../images/line/wireless/zigbee/item-7.2.jpg"></center>

		<p>Рисунок 6. Поиск маршрута. Шаг 2 (ЛР – логическое расстояние)</p>

		<center><img src="../../../../images/line/wireless/zigbee/item-7.3.jpg"></center>

		<p>Рисунок 7. Поиск маршрута. Шаг 3</p>

		<center><img src="../../../../images/line/wireless/zigbee/item-7.4.jpg"></center>

		<p>Рисунок 8. Поиск маршрута. Шаг 4</p>

		<p>Описанный базовый алгоритм эффективен и универсален, однако требует значительного объема памяти для хранения маршрутов, что усложняет и удорожает устройства.</p>

		<p>Поэтому в сетях ZigBee реализован и другой алгоритм, которые позволяет снизить требования к объему памяти, а иногда и уменьшить сетевой трафик, необходимый для поиска маршрутов. Действие алгоритма основано на том, что адреса в ZigBee сети распределяются иерархически, начиная с координатора. Устройство, не имеющее возможностей маршрутизации или устройство, возможности маршрутизации которого исчерпаны, может воспользоваться иерархической маршрутизацией – менее эффективной, но, тем не менее, вполне практичной.</p>

		<p><strong>Иерархическая маршрутизация</strong>

		<p>В процессе формирования ZigBee сети алгоритм распределения адресов задает диапазоны адресов сетевым устройствам в иерархическом порядке, начиная с координатора. В результате любое устройство в сети, зная свой адрес и адрес получателя пакета, может определить, принадлежит ли конкретный сетевой адрес к «нисходящей» ветви (и к какой именно), или находится в другом месте в иерархии устройств. Исходя из этого, любое устройство может принять простое решение маршрутизации: передавать пакет «вверх» – в направлении координатора или «вниз» – к дочернему устройству.</p>

		<p>Пример иерархической маршрутизации представлен на рисунке 8.</p>

		<p>Как в случае на рис. 7, пакет, отправленный устройством И, предназначен для устройства А. Однако устройство 4 исчерпало свои возможности маршрутизации, поэтому оно не может транслировать пакет непосредственно на устройство А, а вместо этого, используя иерархическую маршрутизацию, направляет этот пакет «вверх» по иерархической лестнице – на устройство 2. Далее пакет транслируется на координатор К, который передает его на искомый адрес А.</p>

		<p>Преимущества иерархической маршрутизации заключаются в ее простоте и меньшем использовании ресурсов, что позволяет создавать очень недорогие устройства без возможностей маршрутизации, которые, тем не менее, могут участвовать в любой ZigBee совместимой сети. Недостаток алгоритма в том, что пакеты будут двигаться вверх и вниз до координатора и обратно даже в том случае, когда между источником и приемником возможна прямая связь.</p>

		<center><img src="../../../../images/line/wireless/zigbee/item-7.5.jpg"></center>

		<p>Рисунок 9. Иерархическая маршрутизация</p>

		<p><strong>Маршрутизация к агрегатору</strong></p>

		<p>Во многих, если не в большинстве приложений, использующих беспроводные сети, есть особое устройство, часто называемое агрегатором, к которому остальные сетевые устройства должны регулярно направлять данные. С целью экономии сетевого трафика в ZigBee PRO предусмотрен специальный случай поиска маршрутов, при котором единственный широковещательный запрос маршрута от агрегатора позволяет установить в роутинговых таблицах всех маршрутизаторов сети записи с агрегатором в качестве получателя.</p>

	</div>

</div>


</body>
</html>