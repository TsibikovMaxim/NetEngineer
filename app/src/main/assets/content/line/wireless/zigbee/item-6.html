<!DOCTYPE html>
<html>
<head>
	<!-- Charset -->
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Формирование сети ZigBee</title>
	<!-- Include meta tag to ensure proper rendering and touch zooming-->
	<meta name="view-port" content="width=device-width, initial-scale=1">
	<!-- Include jQuery Mobile stylesheets -->
	<link rel="stylesheet" href="../../../../css/jquery.mobile-1.4.5.min.css" />
	<link rel="stylesheet" href="../../../../css/themes/my-theme.css" />
	<link rel="stylesheet" href="../../../../css/themes/jquery.mobile.icons.min.css" />
	<link rel="stylesheet" href="../../../../css/my-style.css" />
	<!-- Include the jQuery Mobile library -->
	<script type="text/javascript" src="../../../../js/jquery-1.11.3.min.js"></script>
	<!-- Include the jQuery Mobile library -->
	<script type="text/javascript" src="../../../../js/jquery.mobile-1.4.5.min.js"></script>
	<!-- AdMob-->
	<script type="text/javascript" src="../../../../js/admob.js"></script>
	<!-- cordova js -->
	<script src="../../../../cordova.js"></script>
</head>
<body>

<div data-role="page" id="position" data-theme="a">

	<div data-role="header" data-position="fixed">
		<a data-role="button" data-rel="back" data-ajax="false" class="ui-nodisc-icon transparentButton" data-icon="carat-l" data-iconpos="notext" data-theme="a">Кнопка назад</a>
		<h1>Описание</h1>
		<a href="../../../../index.html" data-ajax="false" class="ui-nodisc-icon transparentButton" data-role="button" data-icon="home" data-iconpos="notext" data-shadow="false" data-transition="none" data-theme="a">На главную</a>
	</div>

	<div data-role="main" class="ui-content">

		<h3>Формирование сети ZigBee</h3>

		<p>Любая сеть ZigBee начинается с ее формирования. Устройство, способное быть координатором (оно назначается при проектировании сети), определяет свободный от помех канал и настраивает себя в качестве координатора. В ZigBee это устройство называется PAN координатором – координатором персональной (в отличие от локальной – LAN) сети.</p>

		<p>Устройства, которые хотели бы присоединиться к сети (подключиться, войти в состав сети), рассылают широковещательный запрос. Первоначально на этот запрос отвечает только PAN координатор. В дальнейшем кроме PAN координатора предоставить присоединение к сети могут маршрутизаторы ZigBee, которые уже присоединились к PAN координатору непосредственно или через другие маршрутизаторы. После того, как устройство, желающее присоединится к сети, получает ответ на широковещательный запрос, следует обмен сообщениями, которые определяют, может ли устройство присоединиться к сети. Ключевым фактором определения возможности является способность маршрутизатора обслужить новые устройства в дополнение к ранее подключенным.</p>

		<p><strong>Вступление в сеть</strong></p>

		<p>Существует два пути вступления устройств в сеть ZigBee: МАС ассоциация и повторное сетевое присоединение (NWK rejoin).</p>

		<p><strong>МАС ассоциация</strong></p>

		<p>Как очевидно из названия, МАС ассоциация осуществляется на МАС уровне. Способностью к МАС ассоциации должно по умолчанию обладать каждое устройство ZigBee. Механизм МАС ассоциации следующий:</p>

		<ul>
			<li>Координатор или маршрутизатор, который собирается позволить другим устройствам присоединиться к нему, должен выставить на свой МАС уровень разрешение на присоединение NLME-PERMIT-JOINING.request.</li>
			<li>В свою очередь, устройство, желающее вступить в сеть, выставляет на свой МАС уровень запрос на присоединение NLME-NETWORK-DISCOVERY.request.</li>
			<li>После этого вступающее в сеть устройство передает в эфир широковещательный запрос маячка и получает этот маячок от маршрутизатора(ов), готового(ых) подключить новое устройство.</li>
			<li>Получив маячок (маячки), устройство определяет, в какую сеть оно желает вступить и к какому конкретно устройству присоединиться, после чего выставляет на свой МАС уровень требование NLME-JOIN.request с установленным в значение FALSE флажком «повторное присоединение» (rejoin).</li>
			<li>Сделав это, вступающее устройство направляет на выбранный маршрутизатор запрос на присоединение и получает ответ, содержащий присвоенный ему сетевой адрес.</li>
		</ul>

		<p>Отметим, что МАС ассоциация не является безопасной, так как все сообщения передаются в открытом (не зашифрованном) виде.</p>

		<p><strong>Повторное сетевое присоединение (NWK rejoin)</strong>

		<p>Повторное сетевое присоединение (NWK rejoin) вопреки названию может использоваться и при первом подключении устройства к сети. И, как ясно из названия, осуществляется на сетевом уровне. Это означает, во-первых, что стандартный механизм МАС ассоциации в этом случае может либо применяться (в этом случае ZigBee маршрутизатор выставит разрешение на присоединение NLME-PERMIT-JOINING.request), либо нет. Во-вторых, это означает, что обмен пакетами может быть безопасным, если вступающее устройство знает текущий сетевой ключ. Это возможно, если устройство действительно переподключается, либо если оно включается впервые, но получило сетевой ключ через какой-то сторонний механизм (например, при настройке).</p>

		<p>При таком подключении устройство, желающее вступить в сеть, выставляет на свой сетевой уровень (NWK) запрос на присоединение NLME-JOIN.request и обменивается с подключающим его маршрутизатором пакетами «запрос подключения» – «ответ на запрос подключения».</p>

		<p><strong>Динамика сети</strong>

		<p>Помимо процесса подключения новых устройств к изменению структуры сети могут привести другие процессы. Устройства могут, например, покидатьсеть или повторно подключаться к сети в других местах (например, при перезагрузке устройства).</p>

		<p>Рисунок 4 показывает пример переподключения. В этом примере устройство с коротким адресом «0E3B» переподключается к сети, как «097D» и впоследствии как «0260». На каждом этапе это устройство присоединяется к другому маршрутизатору, который выделяет адрес из имеющегося в его распоряжении диапазона адресов.</p>

		<p>Одно из важных достоинств сети ZigBee – способность отслеживать устройства и топологию сети в режиме частых подключений, отключений и переподключений устройств.</p>

		<center><img src="../../../../images/line/wireless/zigbee/item-6.jpg"></center>

		<p>Рисунок 4. Переподключение конечного устройства в древовидной сети</p>

	</div>

</div>


</body>
</html>