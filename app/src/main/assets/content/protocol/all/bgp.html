<!DOCTYPE html>
<html>
<head>
	<!-- Charset -->
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>BGP</title>
	<!-- Include meta tag to ensure proper rendering and touch zooming-->
	<meta name="view-port" content="width=device-width, initial-scale=1">
	<!-- Include jQuery Mobile stylesheets -->
	<link rel="stylesheet" href="../../../css/jquery.mobile-1.4.5.min.css" />
	<link rel="stylesheet" href="../../../css/themes/my-theme.css" />
	<link rel="stylesheet" href="../../../css/themes/jquery.mobile.icons.min.css" />
	<link rel="stylesheet" href="../../../css/my-style.css" />
	<!-- Include the jQuery Mobile library -->
	<script type="text/javascript" src="../../../js/jquery-1.11.3.min.js"></script>
	<!-- Include the jQuery Mobile library -->
	<script type="text/javascript" src="../../../js/jquery.mobile-1.4.5.min.js"></script>
	<!-- AdMob-->
	<script type="text/javascript" src="../../../js/admob.js"></script>
	<!-- cordova js -->
	<script src="../../../cordova.js"></script>
</head>
<body>

<div data-role="page" id="position" data-theme="a">

	<div data-role="header" data-position="fixed">
		<a data-role="button" data-rel="back" data-ajax="false" class="ui-nodisc-icon transparentButton" data-icon="carat-l" data-iconpos="notext" data-theme="a">Кнопка назад</a>
		<h1>Описание</h1>
		<a href="../../../index.html" data-ajax="false" class="ui-nodisc-icon transparentButton" data-role="button" data-icon="home" data-iconpos="notext" data-shadow="false" data-transition="none" data-theme="a">На главную</a>
	</div>

	<div data-role="main" class="ui-content">

		<h3>BGP</h3>

		<p><strong>BGP</strong> (Border Gateway Protocol, протокол граничного шлюза) — динамический протокол маршрутизации.</p>

		<p>Относится к классу протоколов маршрутизации внешнего шлюза (англ. EGP — External Gateway Protocol).</p>

		<p>На текущий момент является основным протоколом динамической маршрутизации в сети Интернет.</p>

		<p>Протокол BGP предназначен для обмена информацией о достижимости подсетей между автономными системами (АС, англ. AS — autonomous system), то есть группами маршрутизаторов под единым техническим и административным управлением, использующими протокол внутридоменной маршрутизации для определения маршрутов внутри себя и протокол междоменной маршрутизации для определения маршрутов доставки пакетов в другие АС. Передаваемая информация включает в себя список АС, к которым имеется доступ через данную систему. Выбор наилучших маршрутов осуществляется исходя из правил, принятых в сети.</p>

		<p>BGP поддерживает бесклассовую адресацию и использует суммирование маршрутов для уменьшения таблиц маршрутизации. С 1994 года действует четвёртая версия протокола, все предыдущие версии являются устаревшими.</p>

		<p>BGP, наряду с DNS, является одним из главных механизмов, обеспечивающих функционирование Интернета.</p>

		<p>BGP является протоколом прикладного уровня и функционирует поверх протокола транспортного уровня TCP (порт 179). После установки соединения передаётся информация обо всех маршрутах, предназначенных для экспорта. В дальнейшем передаётся только информация об изменениях в таблицах маршрутизации. При закрытии соединения удаляются все маршруты, информация о которых передана противоположной стороной.</p>

		<hr><h3>Формат сообщения</h3>

		<p>Сообщение BGP начинается с заголовка, после которого, в зависимости от типа сообщения, могут следовать данные. Максимальная длина сообщения — 4096 октетов, минимальная — 19 октетов. Заголовок сообщения содержит следующие поля:</p>

		<ul>
			<li>Маркер (16 октетов) — используется для совместимости, должен быть заполнен единицами;</li>
			<li>Длина (2 октета) — длина сообщения в октетах, включая заголовок;</li>
			<li>Тип (1 октет):<ul>
				<li>1 — Открытие;</li>
				<li>2 — Обновление информации;</li>
				<li>3 — Оповещение;</li>
				<li>4 — Сохранение соединения.</li>
			</ul></li>
		</ul>

		<p><strong>Открытие</strong></p>

		<p>Первое сообщение после установки соединения должно быть «Открытие». Если сообщение успешно обработано, в ответ будет послано «Сохранение соединения». В дополнение к заголовку BGP сообщение «Открытие» содержит следующие поля:</p>

		<ul>
			<li>Версия (1 октет) — версия протокола, текущее значение 4;</li>
			<li>Моя система (2 октета) — номер автономной системы;</li>
			<li>Интервал времени (2 октета) — максимальный интервал времени в секундах между получением сообщений «Обновление информации» или «Сохранение соединения»;</li>
			<li>Идентификатор отправителя (4 октета) — устанавливается равным IP-адресу;</li>
			<li>Длина дополнительных параметров (1 октет);</li>
			<li>Дополнительные параметры:<ul>
				<li>Тип параметра (1 октет);</li>
				<li>Длина параметра (1 октет);</li>
				<li>Значение параметра.</li>
			</ul></li>
		</ul>

		<p><strong>Обновление информации</strong></p>

		<center><img src="../../../images/protocol/bgp1.png"></center>

		<p>Сообщение «Обновление информации» предназначено для передачи информации о маршрутах между АС. Сообщение может указывать новые маршруты и удалять неработающие. Структура сообщения:</p>

		<ul>
			<li>Длина удаляемых маршрутов (2 октета);</li>
			<li>Удаляемые маршруты:<ul>
				<li>Длина (1 октет) — длина в битах префикса IP-адреса;</li>
				<li>Префикс IP-адреса, дополненный минимальным количеством бит до полного октета;</li>
			</ul></li>
			<li>Длина атрибутов пути (2 октета);</li>
			<li>Атрибуты пути:<ul>
				<li>Тип атрибута:<ul>
					<li>Флаг атрибута;</li>
					<li>Код атрибута;</li>
				</ul></li>
				<li>Длина атрибута (1 или 2 октета, в зависимости от флага);</li>
				<li>Данные атрибута;</li>
			</ul></li>
			<li>Информация о достижимости — список префиксов IP-адресов:<ul>
				<li>Длина (1 октет) — длина в битах префикса IP-адреса (нулевая длина — соответствие всем IP-адресам);</li>
				<li>Префикс IP-адреса, дополненный минимальным количеством бит до полного октета.</li>
			</ul></li>
		</ul>

		<p>Все атрибуты пути соответствуют всем записям в поле «Информация о достижимости».</p>

		<p><strong>Сохранение соединения</strong></p>

		<p>Сообщение сохранения соединения должно посылаться не реже чем раз в одну третью часть максимального интервала времени между сообщениями, но не чаще чем один раз в секунду. Если интервал времени установлен равным нулю, то сообщение не должно периодически рассылаться. Сообщение не использует дополнительных полей.</p>

		<p><strong>Оповещение</strong></p>

		<p>Оповещение посылается в случае обнаружения ошибки, при этом соединение закрывается. Сообщение содержит следующие поля:</p>

		<ul>
			<li>Код ошибки (1 октет);</li>
			<li>Субкод (1 октет);</li>
			<li>Данные.</li>
		</ul>

		<hr><h3>Процесс выбора</h3>

		<p>Процесс выбора запускается после обновления информации и служит для отбора маршрутов, предназначенных для использования локально и передачи другим маршрутизаторам, использующим BGP. Процесс использует атрибуты полученных маршрутов для оценки степени предпочтения маршрута или информации о том, что маршрут является неподходящим для занесения в базу маршрутов и должен быть исключён из процесса отбора. Процесс делится на три фазы:</p>

		<ul>
			<li>Вычисление степени предпочтения каждого полученного маршрута;</li>
			<li>Выбор наилучшего маршрута для каждого места назначения и занесение его в базу маршрутов;</li>
			<li>Передача маршрутов на другие маршрутизаторы, при этом может производиться суммирование маршрутов.</li>
		</ul>

	</div>

</div>


</body>
</html>